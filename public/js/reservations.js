async function load(){const e=document.querySelector('input[name="bot_id"]').value||"default",t=await fetch("/api/appointments?bot_id="+encodeURIComponent(e)),n=await t.json(),o=document.getElementById("list");o.innerHTML="",n.forEach(e=>{const t=document.createElement("li");t.textContent=e.customer+" - "+e.starts_at+" ("+(e.notes||"")+")",o.appendChild(t)})}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("f").addEventListener("submit",async e=>{e.preventDefault();const t=e.target,a={bot_id:t.bot_id.value||"default",customer:t.customer.value,starts_at:t.starts_at.value,notes:t.notes.value},n=await fetch("/api/appointments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});n.ok||(alert("No se pudo agendar: "+(await n.text()))),t.reset(),load()}),load()});