async function loadMode(){const e=document.getElementById("bot_id").value,t=await fetch("/api/config?bot_id="+encodeURIComponent(e)),o=await t.json();o.ok&&(document.getElementById("mode").textContent=o.config.mode)}function append(e,t){const o=document.getElementById("chat"),n=document.createElement("div");n.textContent=e,"user"===t&&(n.style.fontWeight="600"),o.appendChild(n),o.scrollTop=o.scrollHeight}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("send").addEventListener("click",async()=>{const e=document.getElementById("bot_id").value,t=document.getElementById("msg").value.trim();if(!t)return;append("TÃº: "+t,"user"),document.getElementById("msg").value="";const o=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bot_id:e,message:t})}),n=await o.json();n.ok?append("Bot: "+n.reply):append("Error: "+(n.error||""))}),document.getElementById("bot_id").addEventListener("change",loadMode),loadMode()});